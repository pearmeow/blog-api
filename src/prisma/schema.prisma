datasource db {
    url      = env("DATABASE_URL")
    provider = "postgresql"
}

generator client {
    provider = "prisma-client-js"
    output   = "../../generated/prisma"
}

model Post {
    id        Int       @id @default(autoincrement())
    title     String
    text      String
    date      DateTime  @default(now())
    published Boolean   @default(false)
    author    Author    @relation(references: [id], fields: [authorId], onDelete: Cascade)
    authorId  Int
    comments  Comment[]
}

model Comment {
    id       Int      @id @default(autoincrement())
    text     String
    date     DateTime @default(now())
    edited   Boolean  @default(false)
    post     Post     @relation(references: [id], fields: [postId], onDelete: Cascade)
    postId   Int
    author   User     @relation(references: [id], fields: [authorId], onDelete: Cascade)
    authorId Int
}

model User {
    id       Int       @id @default(autoincrement())
    username String    @unique
    password String
    comments Comment[]
}

model Author {
    id       Int    @id @default(autoincrement())
    username String @unique
    password String
    posts    Post[]
}
